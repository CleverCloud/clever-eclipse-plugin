<?xml version="1.0" encoding="UTF-8"?>
<plugin>

   <extension
         id="com.clevercloud.eclipse.plugin.fragment"
         point="org.eclipse.e4.workbench.model">
      <fragment
            uri="fragment.e4xmi">
      </fragment>
   </extension>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="debugenabled">
         <with
               variable="debugEnabled">
            <equals
                  value="true">
            </equals>
         </with>
      </definition>
   </extension>
   <extension
         point="org.eclipse.ui.importWizards">
      <wizard
            category="org.eclipse.egit.ui.internal.clone.gitclonecategory"
            class="com.clevercloud.eclipse.plugin.ui.wizards.CleverWizard"
            icon="icons/clever16.png"
            id="com.clevercloud.eclipse.plugin.ui.wizards.importCleverWizard"
            name="Import from Clever Cloud">
      </wizard>
   </extension>
   <extension
         id="clevernature"
         name="CleverNature"
         point="org.eclipse.core.resources.natures">
     <runtime>
       <run
	   class="com.clevercloud.eclipse.plugin.CleverNature">
       </run>
     </runtime>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.ui.navigator.ProjectExplorer#PopupMenu?after=additions">
         <menu
               icon="icons/clever16.png"
               label="Clever Cloud">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <iterate
                        ifEmpty="false"
                        operator="and">
                     <adapt
                           type="org.eclipse.core.resources.IProject">
                        <and>
                           <not>
                              <test
                                    property="org.eclipse.core.resources.projectNature"
                                    value="clever-eclipse.clevernature">
                              </test></not>
                        </and>
                     </adapt>
                  </iterate>
               </with>
            </visibleWhen>
            <command
                  commandId="com.clevercloud.eclipse.plugin.command.consoleCommand"
                  icon="icons/application_add.png"
                  label="Create an app"
                  style="push">
            </command>
            <command
                  commandId="com.clevercloud.eclipse.plugin.command.consoleCommand"
                  icon="icons/application_link.png"
                  label="Link to an existing app"
                  style="push">
            </command>
         </menu>
      </menuContribution>
   </extension>
</plugin>
